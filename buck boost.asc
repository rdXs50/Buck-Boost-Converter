Version 4
SHEET 1 2488 680
WIRE 800 -384 640 -384
WIRE 1616 -368 1472 -368
WIRE 1776 -368 1712 -368
WIRE 1840 -368 1776 -368
WIRE 1968 -368 1840 -368
WIRE 2144 -368 2032 -368
WIRE 2384 -368 2144 -368
WIRE 800 -336 800 -384
WIRE 1472 -240 1472 -368
WIRE 1840 -224 1840 -368
WIRE 2144 -224 2144 -368
WIRE 2384 -224 2384 -368
WIRE 800 -144 800 -256
WIRE 800 -144 208 -144
WIRE 1104 -144 800 -144
WIRE 208 -96 208 -144
WIRE 800 -96 800 -144
WIRE 1104 -64 1104 -144
WIRE 800 -16 544 -16
WIRE 896 -16 800 -16
WIRE 1040 -16 976 -16
WIRE 1472 16 1472 -160
WIRE 1840 16 1840 -144
WIRE 1840 16 1472 16
WIRE 2064 16 1840 16
WIRE 2144 16 2144 -160
WIRE 2144 16 2064 16
WIRE 2384 16 2384 -144
WIRE 2384 16 2144 16
WIRE 544 48 544 -16
WIRE -176 96 -272 96
WIRE -48 96 -96 96
WIRE 208 96 208 -16
WIRE 208 96 144 96
WIRE 304 96 208 96
WIRE 480 96 384 96
WIRE 2064 96 2064 16
WIRE 1104 112 1104 32
WIRE 1216 112 1104 112
WIRE 1360 112 1296 112
WIRE 1696 112 1696 -320
WIRE 1696 112 1360 112
WIRE 896 144 896 -16
WIRE 976 144 976 -16
WIRE 976 144 896 144
WIRE -272 160 -272 96
WIRE 208 192 144 192
WIRE 1104 192 1104 112
WIRE 1360 192 1360 112
WIRE 976 240 976 144
WIRE 1040 240 976 240
WIRE -272 288 -272 240
WIRE -176 288 -272 288
WIRE -48 288 -48 192
WIRE -48 288 -176 288
WIRE -176 352 -176 288
WIRE 208 368 208 192
WIRE 544 368 544 144
WIRE 544 368 208 368
WIRE 848 368 544 368
WIRE 992 368 848 368
WIRE 1104 368 1104 288
WIRE 1104 368 992 368
WIRE 1360 368 1360 272
WIRE 1360 368 1104 368
WIRE 1776 368 1776 -368
WIRE 1776 368 1360 368
WIRE 640 432 640 -384
WIRE 848 432 848 368
WIRE 848 432 640 432
WIRE 992 480 992 368
FLAG -176 352 0
FLAG 992 480 0
FLAG 2064 96 0
SYMBOL res -80 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 320
SYMBOL Optos\\PC817A 48 144 R0
SYMATTR InstName U1
SYMBOL voltage -272 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 0 0 0 0.004 0.01)
SYMBOL res 192 -112 R0
SYMATTR InstName R2
SYMATTR Value 10K
SYMBOL res 400 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1K
SYMBOL res 784 -112 R0
SYMATTR InstName R4
SYMATTR Value 10K
SYMBOL npn 480 48 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL npn 1040 -64 R0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL pnp 1040 288 M180
SYMATTR InstName Q3
SYMATTR Value 2N3906
SYMBOL voltage 800 -240 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL voltage 1472 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 24
SYMBOL ind 1824 -240 R0
SYMATTR InstName L1
SYMATTR Value 20e-6
SYMBOL cap 2128 -224 R0
SYMATTR InstName C1
SYMATTR Value 80e-6
SYMBOL res 2368 -240 R0
SYMATTR InstName R5
SYMATTR Value 5
SYMBOL diode 2032 -384 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N914
SYMBOL nmos 1616 -320 R270
SYMATTR InstName M1
SYMATTR Value Si7802DN
SYMBOL res 1312 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL res 1376 288 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 10000
TEXT -304 472 Left 2 !.tran 1
